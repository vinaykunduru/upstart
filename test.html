<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Infinite Loop Thumbnail Slider</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        width: 100vw;
        height: 100vh;
        box-sizing: border-box;
        background: #fff;
        font-family: "Montserrat", Arial, sans-serif;
      }
      .thumbnail-slider {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 250px;
        background: #fff;
        z-index: 10000;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        box-shadow: 0 3px 24px rgba(0, 0, 0, 0.03);
        overflow: hidden;
      }
      .thumbnails {
        display: flex;
        align-items: center;
        gap: 24px;
        height: 210px;
        will-change: transform;
        padding-top: 20px;
        user-select: none;
        touch-action: pan-y;
      }
      .thumb {
        width: 240px;
        height: 150px;
        flex: none;
        position: relative;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.09);
        cursor: pointer;
        -webkit-tap-highlight-color: transparent;
      }
      .thumb:hover {
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.17);
      }
      .thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        border-radius: 0; /* removed border radius */
        pointer-events: none;
        user-select: none;
      }
      .thumb-title {
        position: absolute;
        left: 50%;
        bottom: 10px;
        transform: translateX(-50%);
        display: flex;
        opacity: 0;
        gap: 2px;
        font-weight: 700;
        font-size: 1.03em;
        color: #ff9300;
        pointer-events: none;
        white-space: pre;
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
      }
      @media (max-width: 600px) {
        .thumbnail-slider {
          height: 130px;
        }
        .thumbnails {
          height: 100px;
          gap: 11px;
        }
        .thumb {
          width: 80px;
          height: 60px;
        }
        .thumb-title {
          font-size: 0.88em;
        }
      }
    </style>
  </head>
  <body>
    <div class="thumbnail-slider" aria-label="Thumbnail Slider">
      <div class="thumbnails" aria-live="polite" aria-atomic="true" role="list">
        <!-- Original set of thumbs -->
        <div
          class="thumb"
          data-title="Creative Fire"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80"
            alt="Creative Fire"
          />
          <div class="thumb-title"></div>
        </div>
        <div
          class="thumb"
          data-title="Bold Vision"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1470770841072-f978cf4d019e?auto=format&fit=crop&w=400&q=80"
            alt="Bold Vision"
          />
          <div class="thumb-title"></div>
        </div>
        <div
          class="thumb"
          data-title="Brand Pulse"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80"
            alt="Brand Pulse"
          />
          <div class="thumb-title"></div>
        </div>
        <div
          class="thumb"
          data-title="Experience Maker"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1464547323746-4edd0cd0c746?auto=format&fit=crop&w=400&q=80"
            alt="Experience Maker"
          />
          <div class="thumb-title"></div>
        </div>
        <div
          class="thumb"
          data-title="Digital Impact"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1454023492550-5696f8ff10e1?auto=format&fit=crop&w=400&q=80"
            alt="Digital Impact"
          />
          <div class="thumb-title"></div>
        </div>
        <div class="thumb" data-title="Bold Moves" role="listitem" tabindex="0">
          <img
            src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80"
            alt="Bold Moves"
          />
          <div class="thumb-title"></div>
        </div>
        <div
          class="thumb"
          data-title="Crafted Ideas"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1465101178521-f6f03bf8a1b2?auto=format&fit=crop&w=400&q=80"
            alt="Crafted Ideas"
          />
          <div class="thumb-title"></div>
        </div>
        <div
          class="thumb"
          data-title="Inspired Design"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?auto=format&fit=crop&w=400&q=80"
            alt="Inspired Design"
          />
          <div class="thumb-title"></div>
        </div>
        <div
          class="thumb"
          data-title="Visionary Art"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1508630179649-4c44aa36d161?auto=format&fit=crop&w=400&q=80"
            alt="Visionary Art"
          />
          <div class="thumb-title"></div>
        </div>
        <div
          class="thumb"
          data-title="Engineered Wonder"
          role="listitem"
          tabindex="0"
        >
          <img
            src="https://images.unsplash.com/photo-1516979187457-637abb4f9353?auto=format&fit=crop&w=400&q=80"
            alt="Engineered Wonder"
          />
          <div class="thumb-title"></div>
        </div>
        <!-- Duplicate thumbs for infinite loop -->
        <!-- These will be cloned by JS dynamically -->
      </div>
    </div>

    <script>
      const container = document.querySelector(".thumbnails");
      let thumbs = Array.from(document.querySelectorAll(".thumb"));
      let thumbCount = thumbs.length;

      // Clone thumbs for infinite looping
      thumbs.forEach((thumb) => {
        const clone = thumb.cloneNode(true);
        container.appendChild(clone);
      });

      let totalThumbs = container.children.length;
      let thumbWidth =
        thumbs[0].offsetWidth +
        parseFloat(getComputedStyle(container).gap || 24);

      // Positions
      let currentX = 0;

      /**
       * Normalize scroll position for infinite loop
       */
      function updateInfiniteX(x) {
        // Since thumbs are duplicated, loop back when scrolling past half
        const maxTranslate = -thumbWidth * thumbCount;
        if (x < maxTranslate) {
          return x + maxTranslate;
        }
        if (x > 0) {
          return x - maxTranslate;
        }
        return x;
      }

      function setTranslate(x) {
        currentX = updateInfiniteX(x);
        gsap.set(container, { x: currentX });
      }

      setTranslate(0);

      // Scroll by delta thumbnails
      function scrollBy(delta) {
        setTranslate(currentX - delta * thumbWidth);
      }

      // Handle mouse wheel scrolling - horizontal
      window.addEventListener(
        "wheel",
        (e) => {
          if (!e.ctrlKey && Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
            e.preventDefault();
            const delta = e.deltaY > 0 ? 1 : -1;
            scrollBy(delta);
          }
        },
        { passive: false }
      );

      // Mobile swipe: swipe up = slide right (+1), swipe down = slide left (-1)
      let touchStartY = null;
      container.addEventListener("touchstart", (e) => {
        if (e.touches.length === 1) {
          touchStartY = e.touches[0].clientY;
        }
      });
      container.addEventListener(
        "touchmove",
        (e) => {
          if (touchStartY !== null) {
            e.preventDefault(); // prevent vertical page scroll
          }
        },
        { passive: false }
      );
      container.addEventListener(
        "touchend",
        (e) => {
          if (touchStartY === null) return;
          let endY = e.changedTouches.clientY;
          let diff = endY - touchStartY;
          if (Math.abs(diff) > 30) {
            // swipe up moves slider right (delta +1)
            // swipe down moves slider left (delta -1)
            scrollBy(diff < 0 ? 1 : -1);
          }
          touchStartY = null;
        },
        { passive: false }
      );

      // Animate thumb titles on hover (desktop)
      container.querySelectorAll(".thumb").forEach((thumb) => {
        const titleText = thumb.getAttribute("data-title");
        const titleDiv = thumb.querySelector(".thumb-title");

        thumb.addEventListener("mouseenter", () => {
          if (window.innerWidth <= 700) return; // disable on mobile
          titleDiv.innerHTML = "";
          [...titleText].forEach((char) => {
            const span = document.createElement("span");
            span.textContent = char;
            titleDiv.appendChild(span);
          });
          titleDiv.style.opacity = 1;
          gsap.fromTo(
            titleDiv.children,
            { y: 22, opacity: 0 },
            {
              y: 0,
              opacity: 1,
              stagger: 0.05,
              duration: 0.5,
              ease: "power2.out",
            }
          );
        });

        thumb.addEventListener("mouseleave", () => {
          if (window.innerWidth <= 700) return;
          gsap.to(titleDiv.children, {
            y: -20,
            opacity: 0,
            stagger: 0.03,
            duration: 0.3,
            ease: "power2.in",
            onComplete: () => {
              titleDiv.style.opacity = 0;
              titleDiv.innerHTML = "";
            },
          });
        });
      });

      // Adjust thumbWidth and transforms on resize
      window.addEventListener("resize", () => {
        thumbWidth =
          thumbs[0].offsetWidth +
          parseFloat(getComputedStyle(container).gap || 24);
        setTranslate(currentX);
      });
    </script>
  </body>
</html>
